<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Eventos - CriasEvent</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
</head>
<body>

    <header>
        <div class="logo">CriasEvent</div>
        <form method="GET" action="{{ url_for('eventos') }}" class="search-bar-form">
            <input type="text" name="q" class="search-bar-input" placeholder="Buscar por eventos" value="{{ request.args.get('q', '') }}">
            <button type="submit" class="search-bar-btn">🔍</button>
        </form>

        
        <nav>
            <a href="{{ url_for('index') }}">Home</a>
            <a href="{{ url_for('eventos') }}" class="active">Eventos</a>
            <a href="{{ url_for('midia') }}">Mídia</a>
            <a href="{{ url_for('sobre') }}">Sobre</a>
        </nav>

        {% if current_user.is_authenticated %}
            <div class="profile-container">
                <button onclick="toggleMenu()" class="profile-button">👤 {{ current_user.nome_usuario }}</button>
                <div id="profileMenu" class="profile-menu">
                    <p><strong>ID de Usuário:</strong> {{ current_user.id }}</p>
                    <p><strong>Usuário:</strong> {{ current_user.nome_usuario }}</p>
                    <p><strong>Nome:</strong> {{ current_user.nome_completo }}</p>
                    <p><strong>Tipo:</strong> {{ current_user.tipo }}</p>
                    <a href="{{ url_for('logout') }}">🚪 Sair</a>
                </div>
            </div>
        {% else %}
            <nav>
                <a href="{{ url_for('mostrar_formulario_cadastro') }}" class="btn-cadastro">Cadastro</a>
                <a href="{{ url_for('login') }}" class="btn-cadastro">Login</a>
            </nav>
        {% endif %}

        <button id="toggle-mode">🌙</button>
    </header>

    <main class="container">
        <section class="eventos-header">
            <h1>Próximos Eventos</h1>


         {% if current_user.is_authenticated and current_user.tipo == 'organizador' %}
            <div style="text-align: right; margin: 10px 0;">
                <a href="{{ url_for('cadastro_evento') }}" class="btn-cadastro" style="padding: 8px 16px; background-color: var(--cor-primaria); color: white; border-radius: 8px; text-decoration: none;">+ Criar Evento</a>
            </div>
        {% endif %}
   
        
        <section class="eventos-grid">
            {% for evento in eventos %}
                <div class="card">
                    <div class="top-bar">{{ evento.nome }}</div>
                    <div class="image-container">
                        {% if evento.imagem %}
                            <img src="data:image/jpeg;base64,{{ evento.imagem }}" alt="{{ evento.nome }}" />
                        {% else %}
                            <img src="{{ url_for('static', filename='imagens/default.jpg') }}" alt="Sem imagem" />
                        {% endif %}
                    </div>
                    <div class="content">
                        <div class="evento-subtitulo">{{ evento.descricao[:60] }}</div>
                        <div class="title">{{ evento.nome }}</div>
                        <div class="dates">{{ evento.data.strftime('%d/%m/%Y') }}</div>
                        <div class="location">{{ evento.local }}</div>
                        <p><strong>Status:</strong> {{ evento.status }}</p>
                        <p><strong>Criado por:</strong> {{ evento.organizador_id }}</p>
                        <button class="buy-button" data-evento-id="{{ evento.id }}">Inscrever-se</button>

                    </div>
                </div>
            {% endfor %}
        </section>


        <div class="pagination">
            <button class="page-btn active">1</button>
            <button class="page-btn">2</button>
            <button class="page-btn">3</button>
            <button class="page-btn next">Próximo ❯</button>
        </div>
    </main>

    <footer>
        <div class="social-icons">
            <a href="#"><img src="{{ url_for('static', filename='imagens/insta.png') }}" alt="Instagram" /></a>
            <a href="#"><img src="{{ url_for('static', filename='imagens/zap.png') }}" alt="WhatsApp" /></a>
        </div>
        <div class="copyright">
            © 2025 CriasEvent - Todos os direitos reservados
        </div>
    </footer>



    <script src="{{ url_for('static', filename='JavaScript/script.js') }}"></script>
</body>
</html>
